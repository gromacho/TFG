<?xml version="1.0"?>
<dds xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://community.rti.com/schema/7.2.0/rti_routing_service.xsd">
  <routing_service name="RS-RWT" group_name="maps">
    <domain_route name="RWT_UDPLAN">
      <participant name="ExternalParticipant">
        <domain_id>$(WAN_DOMAIN)</domain_id>
        <participant_qos>
          <base_name>
            <element>BuiltinQosSnippetLib::Transport.UDP.WAN</element>
          </base_name>
          <transport_builtin>
            <udpv4_wan>
              <public_address>
                  $(PUBLIC_IP)
              </public_address>
              <comm_ports>
                <default>
                  <host>$(HOST_PORT)</host>
                  <public>$(PUBLIC_PORT)</public>
                </default>
              </comm_ports>
            </udpv4_wan>
          </transport_builtin>
        </participant_qos>
      </participant>

      <participant name="InternalParticipant">
        <domain_id>$(LAN_DOMAIN)</domain_id>
        <participant_qos>
          <base_name>
            <element>BuiltinQosSnippetLib::Transport.UDP.AvoidIPFragmentation</element>
          </base_name>
          <transport_builtin>
            <mask>
              UDPv4
            </mask>
          </transport_builtin>
          <discovery>
            <initial_peers>
              <element>
                $(INTERNAL_CDS_IP)
                <!-- rtps@udpv4://10.100.216.113:7400 Change it for the local CDS IP.  -->
                <!-- rtps@udpv4://10.100.136.190:7400 -->
              </element>
            </initial_peers>
          </discovery>
        </participant_qos>
      </participant>

      <session name="Session" enabled="true">
        <auto_topic_route name="External2Internal">
          <publish_with_original_info>true</publish_with_original_info>
          <input participant="ExternalParticipant">
              <datareader_qos base_name="BuiltinQosLib::Generic.StrictReliable">
                <history>
                  <kind>KEEP_LAST_HISTORY_QOS</kind>
                  <depth>10</depth>
                </history>
              </datareader_qos>
              <creation_mode>IMMEDIATE</creation_mode>
              <allow_topic_name_filter>*</allow_topic_name_filter>
              <allow_registered_type_name_filter>*</allow_registered_type_name_filter>
              <!-- 
                   Exclude RTI monitoring, administration and logging 
                   topics. They all start with 'rti/' 
              -->
              <deny_topic_name_filter>rti/*</deny_topic_name_filter>
          </input>

          <output participant="InternalParticipant"> 
              <datawriter_qos base_name="BuiltinQosLib::Generic.StrictReliable">
                <history>
                  <kind>KEEP_LAST_HISTORY_QOS</kind>
                  <depth>10</depth>
                </history>
              </datawriter_qos>
              <creation_mode>IMMEDIATE</creation_mode>
              <allow_topic_name_filter>*</allow_topic_name_filter>
              <allow_registered_type_name_filter>*</allow_registered_type_name_filter>
              <!-- 
                   Exclude RTI monitoring, administration and logging 
                   topics. They all start with 'rti/' 
              -->
              <deny_topic_name_filter>rti/*</deny_topic_name_filter>
          </output>
        </auto_topic_route>

        <auto_topic_route name="Internal2External">
          <publish_with_original_info>true</publish_with_original_info>
          <input participant="InternalParticipant">
              <datareader_qos base_name="BuiltinQosLib::Generic.StrictReliable">
                <history>
                  <kind>KEEP_LAST_HISTORY_QOS</kind>
                  <depth>10</depth>
                </history>
              </datareader_qos>
              <creation_mode>IMMEDIATE</creation_mode>
              <allow_topic_name_filter>*</allow_topic_name_filter>
              <allow_registered_type_name_filter>*</allow_registered_type_name_filter>
              <!-- 
                   Exclude RTI monitoring, administration and logging 
                   topics. They all start with 'rti/' 
              -->
              <deny_topic_name_filter>rti/*</deny_topic_name_filter>
          </input>

          <output participant="ExternalParticipant"> 
              <datawriter_qos base_name="BuiltinQosLib::Generic.StrictReliable">
                <history>
                  <kind>KEEP_LAST_HISTORY_QOS</kind>
                  <depth>10</depth>
                </history>
              </datawriter_qos>
              <creation_mode>IMMEDIATE</creation_mode>
              <allow_topic_name_filter>*</allow_topic_name_filter>
              <allow_registered_type_name_filter>*</allow_registered_type_name_filter>
              <!-- 
                   Exclude RTI monitoring, administration and logging 
                   topics. They all start with 'rti/' 
              -->
              <deny_topic_name_filter>rti/*</deny_topic_name_filter>
          </output>
        </auto_topic_route>

      </session>
    </domain_route>
  </routing_service>
</dds>
